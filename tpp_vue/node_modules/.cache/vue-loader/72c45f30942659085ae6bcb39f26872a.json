{"remainingRequest":"c:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\src\\components\\HeaderSearch.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"c:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\src\\components\\HeaderSearch.vue","mtime":1566625571520},{"path":"c:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"c:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"c:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import url('../assets/css/headerSearch.css');\n",{"version":3,"sources":["HeaderSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA","file":"HeaderSearch.vue","sourceRoot":"src\\components","sourcesContent":["<template>\r\n    <div id=\"header_search\">\r\n      <!--1 放大镜 -->\r\n      <div class=\"magnifier\" @click=\"changeActive\">\r\n        <img src=\"../../public/img/header_search.svg\" alt=\"\">\r\n      </div>\r\n      <!--2 弹出的搜索页面 -->\r\n      <div class=\"search_input\" :class=\"{'d-none':isActive}\">\r\n        <!-- 搜索头部 -->\r\n        <div class=\"input_top\">\r\n          <form action=\"/\">\r\n            <van-search\r\n              v-model=\"inputValue\"\r\n              placeholder=\"影院名称或地址\"\r\n              show-action\r\n              @search=\"onSearch\" \r\n              @cancel=\"changeActive\"\r\n            />\r\n          </form>\r\n        </div>\r\n        <!-- 功能分析，要保存好电影的mid,和影院的cid -->\r\n        <!-- 3 搜索到的东西的内容展示 -->\r\n        <!-- 给这个元素设置高度，使其产生scroll效果 -->\r\n        <div class=\"input_content\">\r\n          <!-- <div class=\"input_main\"> -->\r\n            <div v-for=\"(item,i) of searchList\" :key=\"i\" class=\"input_block\" :data-cid=\"item.cid\"  @click=\"goCinema\">\r\n              <div class=\"cname\">\r\n                <span v-for=\"(elem,i) of item.cname\" :key=\"i\" :class=\"{red:elem==inputValue}\">{{elem}}</span>\r\n              </div>\r\n              <div class=\"caddress\">\r\n                <span v-for=\"(elem,i) of item.caddress\" :key=\"i\" :class=\"{red:elem==inputValue}\">{{elem}}</span>              \r\n              </div>\r\n              <div class=\"tag\">\r\n                <div class=\"tag_icon\" v-for=\"(elem,i) of strSplit(item.tag)\" :key=\"i\">{{elem}}</div>\r\n              </div>\r\n              <div class=\"lowest\">{{item.lowest}}元起</div>\r\n            </div>            \r\n          <!-- </div> -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {  \r\n      isActive:true,\r\n      inputValue:'',\r\n      searchList:[]\r\n    }\r\n  },\r\n  watch:{\r\n    //监听input框的输入内容\r\n    inputValue(){\r\n      // console.log(this.inputValue);\r\n      this.cinemaSearch();\r\n    }\r\n  },\r\n  methods:{\r\n    //---------跳转到影院界面,同时把cid,cname,保存到vuex---------\r\n    goCinema(){\r\n      this.$router.push(\"/cinema\");\r\n      //--vuex--\r\n      // this.$store.commit(\"changeMname\",this.elem.mname)\r\n      this.$store.commit(\"changeCid\",this.searchList.cid)\r\n      this.$store.commit(\"changeCname\",this.searchList.cname)\r\n    },  \r\n    //split函数，用于切割字符串形成数组\r\n    strSplit(str){\r\n      var arr=str.split(\"，\");\r\n      // console.log(arr)\r\n      return arr;\r\n    },\r\n    //搜索功能\r\n    cinemaSearch(){\r\n      // http://127.0.0.1:5050/cinema/v1/search_cinema?sel=0\r\n      var url=\"cinema/v1/search_cinema\"\r\n      var obj={sel:this.inputValue};\r\n      this.axios.get(url,{params:obj}).then(res=>{\r\n        if(res.data.code==0){\r\n          console.log(\"没有查询到数据\");\r\n          this.searchList=[];\r\n        }else{\r\n          var list=res.data.data;\r\n          \r\n          //下面到底部是，搜索框对应文字变色功能\r\n          var str=this.inputValue;\r\n          //不等于0 才切割\r\n          if(str!==\"\"){\r\n            //1对名字的验证\r\n            for(var i=0;i<list.length;i++){\r\n              //拼接数据\r\n              if(list[i].cname.indexOf(str)>=0){\r\n                // console.log(str);\r\n                var arr=list[i].cname.split(str);\r\n                arr.splice(1,0,str);\r\n                list[i].cname=arr;\r\n              }else{\r\n              list[i].cname=[list[i].cname];\r\n              }\r\n            }\r\n            //2 对地址的验证\r\n            for(var i=0;i<list.length;i++){\r\n              //拼接数据\r\n              if(list[i].caddress.indexOf(str)>=0){\r\n                var arr=list[i].caddress.split(str);\r\n                arr.splice(1,0,str);\r\n                list[i].caddress=arr;\r\n              }else{\r\n                list[i].caddress=[list[i].caddress];\r\n              }\r\n            }            \r\n          }else{\r\n            for(var i=0;i<list.length;i++){\r\n              list[i].cname=[list[i].cname];\r\n              list[i].caddress=[list[i].caddress];\r\n            }\r\n          }\r\n          // console.log(list);\r\n          this.searchList=list;\r\n        }\r\n      })        \r\n    },\r\n    // 用户点击时触发\r\n    onSearch(){\r\n      console.log(1);\r\n    },\r\n    //切换input页面的显示隐藏\r\n    changeActive(){\r\n      this.isActive=!this.isActive;\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style>\r\n  @import url('../assets/css/headerSearch.css');\r\n</style>"]}]}